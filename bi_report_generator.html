<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Recipe Labs â€” Data Intelligence Research</title>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800;900&family=SF+Pro+Display:wght@300;400;500;600;700;800;900&display=swap');
        
        :root {
            --black: #000000;
            --white: #FFFFFF;
            --gray-50: #FAFAFA;
            --gray-100: #F5F5F5;
            --gray-200: #EEEEEE;
            --gray-300: #E0E0E0;
            --gray-400: #BDBDBD;
            --gray-500: #9E9E9E;
            --gray-600: #757575;
            --gray-700: #616161;
            --gray-800: #424242;
            --gray-900: #212121;
            --accent: #007AFF;
            --accent-hover: #0051D5;
        }
        
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'SF Pro Display', 'Inter', 'Helvetica Neue', sans-serif;
            background: var(--black);
            color: var(--white);
            line-height: 1.6;
            -webkit-font-smoothing: antialiased;
            -moz-osx-font-smoothing: grayscale;
            overflow-x: hidden;
            position: relative;
        }
        
        /* Subtle Grid Background */
        body::before {
            content: '';
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background-image: 
                linear-gradient(rgba(255, 255, 255, 0.02) 1px, transparent 1px),
                linear-gradient(90deg, rgba(255, 255, 255, 0.02) 1px, transparent 1px);
            background-size: 24px 24px;
            pointer-events: none;
            z-index: 0;
            opacity: 0.3;
        }
        
        /* Isometric Grid Pattern */
        body::after {
            content: '';
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background-image: 
                repeating-linear-gradient(0deg, transparent, transparent 23px, rgba(255, 255, 255, 0.015) 23px, rgba(255, 255, 255, 0.015) 24px),
                repeating-linear-gradient(60deg, transparent, transparent 23px, rgba(255, 255, 255, 0.015) 23px, rgba(255, 255, 255, 0.015) 24px),
                repeating-linear-gradient(120deg, transparent, transparent 23px, rgba(255, 255, 255, 0.015) 23px, rgba(255, 255, 255, 0.015) 24px);
            background-size: 48px 48px;
            pointer-events: none;
            z-index: 0;
            opacity: 0.2;
        }
        
        /* Sidebar */
        .sidebar {
            position: fixed;
            left: 0;
            top: 0;
            width: 72px;
            height: 100vh;
            background: rgba(0, 0, 0, 0.85);
            backdrop-filter: saturate(180%) blur(20px);
            -webkit-backdrop-filter: saturate(180%) blur(20px);
            border-right: 1px solid rgba(255, 255, 255, 0.08);
            display: flex;
            flex-direction: column;
            align-items: center;
            padding: 24px 0;
            z-index: 1000;
        }
        
        .sidebar-logo {
            width: 40px;
            height: 40px;
            margin-bottom: 32px;
            display: flex;
            align-items: center;
            justify-content: center;
            background: var(--white);
            border-radius: 8px;
            font-weight: 700;
            font-size: 18px;
            color: var(--black);
        }
        
        .sidebar-nav {
            display: flex;
            flex-direction: column;
            gap: 8px;
            width: 100%;
            padding: 0 12px;
        }
        
        .nav-item {
            width: 48px;
            height: 48px;
            display: flex;
            align-items: center;
            justify-content: center;
            border-radius: 12px;
            cursor: pointer;
            transition: all 0.2s cubic-bezier(0.4, 0, 0.2, 1);
            position: relative;
        }
        
        .nav-item:hover {
            background: rgba(255, 255, 255, 0.06);
        }
        
        .nav-item.active {
            background: rgba(255, 255, 255, 0.1);
        }
        
        .nav-item svg {
            width: 22px;
            height: 22px;
            stroke: var(--white);
            stroke-width: 1.5;
            fill: none;
            opacity: 0.7;
            transition: opacity 0.2s;
        }
        
        .nav-item.active svg,
        .nav-item:hover svg {
            opacity: 1;
        }
        
        /* Top Header */
        .header {
            position: fixed;
            top: 0;
            left: 72px;
            right: 0;
            height: 64px;
            background: rgba(0, 0, 0, 0.8);
            backdrop-filter: saturate(180%) blur(20px);
            -webkit-backdrop-filter: saturate(180%) blur(20px);
            border-bottom: 1px solid rgba(255, 255, 255, 0.08);
            display: flex;
            align-items: center;
            justify-content: space-between;
            padding: 0 32px;
            z-index: 999;
        }
        
        .header-left {
            display: flex;
            align-items: center;
            gap: 24px;
        }
        
        .search-container {
            position: relative;
            width: 480px;
        }
        
        .search-input {
            width: 100%;
            height: 38px;
            padding: 0 18px 0 44px;
            background: rgba(255, 255, 255, 0.06);
            backdrop-filter: blur(10px);
            -webkit-backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 255, 255, 0.12);
            border-radius: 12px;
            color: var(--white);
            font-size: 14px;
            font-weight: 400;
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
        }
        
        .search-input::placeholder {
            color: rgba(255, 255, 255, 0.45);
        }
        
        .search-input:focus {
            outline: none;
            background: rgba(255, 255, 255, 0.09);
            border-color: rgba(255, 255, 255, 0.25);
            box-shadow: 0 0 0 3px rgba(255, 255, 255, 0.05);
        }
        
        .search-icon {
            position: absolute;
            left: 12px;
            top: 50%;
            transform: translateY(-50%);
            width: 16px;
            height: 16px;
            opacity: 0.5;
        }
        
        .header-right {
            display: flex;
            align-items: center;
            gap: 16px;
        }
        
        .header-button {
            width: 36px;
            height: 36px;
            display: flex;
            align-items: center;
            justify-content: center;
            border-radius: 8px;
            background: transparent;
            border: none;
            cursor: pointer;
            transition: all 0.2s;
        }
        
        .header-button:hover {
            background: rgba(255, 255, 255, 0.06);
        }
        
        .header-button svg {
            width: 18px;
            height: 18px;
            stroke: var(--white);
            stroke-width: 1.5;
            opacity: 0.7;
        }
        
        .header-button:hover svg {
            opacity: 1;
        }
        
        /* Main Content */
        .main-content {
            margin-left: 72px;
            margin-top: 64px;
            padding: 48px;
            min-height: calc(100vh - 64px);
            position: relative;
            z-index: 1;
        }
        
        .page-header {
            margin-bottom: 48px;
        }
        
        .page-title {
            font-size: 48px;
            font-weight: 700;
            letter-spacing: -0.02em;
            margin-bottom: 8px;
            background: linear-gradient(180deg, var(--white) 0%, rgba(255, 255, 255, 0.8) 100%);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
        }
        
        .page-subtitle {
            font-size: 17px;
            color: rgba(255, 255, 255, 0.6);
            font-weight: 400;
        }
        
        /* Section */
        .section {
            margin-bottom: 64px;
        }
        
        .section-header {
            display: flex;
            align-items: center;
            justify-content: space-between;
            margin-bottom: 24px;
        }
        
        .section-title {
            font-size: 24px;
            font-weight: 600;
            letter-spacing: -0.01em;
            color: var(--white);
        }
        
        /* Cards Grid */
        .cards-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(320px, 1fr));
            gap: 20px;
        }
        
        .card {
            background: rgba(255, 255, 255, 0.04);
            backdrop-filter: blur(20px);
            -webkit-backdrop-filter: blur(20px);
            border: 1px solid rgba(255, 255, 255, 0.1);
            border-radius: 20px;
            padding: 28px;
            cursor: pointer;
            transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
            position: relative;
            overflow: hidden;
        }
        
        .card::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 1px;
            background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.15), transparent);
            opacity: 0;
            transition: opacity 0.4s;
        }
        
        .card::after {
            content: '';
            position: absolute;
            inset: 0;
            background: radial-gradient(circle at 50% 0%, rgba(255, 255, 255, 0.05) 0%, transparent 70%);
            opacity: 0;
            transition: opacity 0.4s;
            pointer-events: none;
        }
        
        .card:hover {
            background: rgba(255, 255, 255, 0.06);
            border-color: rgba(255, 255, 255, 0.15);
            transform: translateY(-4px);
            box-shadow: 0 12px 40px rgba(0, 0, 0, 0.4);
        }
        
        .card:hover::before,
        .card:hover::after {
            opacity: 1;
        }
        
        .card-header {
            display: flex;
            align-items: flex-start;
            justify-content: space-between;
            margin-bottom: 16px;
        }
        
        .card-icon-wrapper {
            width: 56px;
            height: 56px;
            border-radius: 14px;
            background: rgba(255, 255, 255, 0.08);
            backdrop-filter: blur(10px);
            -webkit-backdrop-filter: blur(10px);
            display: flex;
            align-items: center;
            justify-content: center;
            margin-bottom: 20px;
            border: 1px solid rgba(255, 255, 255, 0.12);
            position: relative;
            overflow: hidden;
        }
        
        .card-icon-wrapper::before {
            content: '';
            position: absolute;
            inset: 0;
            background: radial-gradient(circle at 30% 30%, rgba(255, 255, 255, 0.1), transparent 70%);
            opacity: 0;
            transition: opacity 0.3s;
        }
        
        .card:hover .card-icon-wrapper::before {
            opacity: 1;
        }
        
        .card-icon-wrapper svg {
            width: 26px;
            height: 26px;
            stroke: var(--white);
            stroke-width: 1.5;
            opacity: 0.95;
            position: relative;
            z-index: 1;
        }
        
        .card-title {
            font-size: 18px;
            font-weight: 600;
            letter-spacing: -0.01em;
            margin-bottom: 8px;
            color: var(--white);
        }
        
        .card-description {
            font-size: 14px;
            color: rgba(255, 255, 255, 0.5);
            line-height: 1.5;
            margin-bottom: 16px;
        }
        
        .card-footer {
            display: flex;
            align-items: center;
            justify-content: space-between;
            font-size: 12px;
            color: rgba(255, 255, 255, 0.4);
        }
        
        .card-badge {
            display: inline-flex;
            align-items: center;
            gap: 6px;
            padding: 4px 10px;
            background: rgba(255, 255, 255, 0.06);
            border-radius: 6px;
            font-size: 11px;
            font-weight: 500;
        }
        
        .card-badge svg {
            width: 12px;
            height: 12px;
            stroke: rgba(255, 255, 255, 0.6);
        }
        
        /* Empty State */
        .empty-card {
            border: 1px dashed rgba(255, 255, 255, 0.2);
            background: rgba(255, 255, 255, 0.02);
            backdrop-filter: blur(10px);
            -webkit-backdrop-filter: blur(10px);
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            min-height: 200px;
            cursor: pointer;
            position: relative;
        }
        
        .empty-card::before {
            content: '';
            position: absolute;
            inset: 0;
            background: radial-gradient(circle at 50% 50%, rgba(255, 255, 255, 0.03), transparent 70%);
            opacity: 0;
            transition: opacity 0.3s;
        }
        
        .empty-card:hover {
            border-color: rgba(255, 255, 255, 0.3);
            background: rgba(255, 255, 255, 0.04);
        }
        
        .empty-card:hover::before {
            opacity: 1;
        }
        
        .empty-card-icon {
            width: 32px;
            height: 32px;
            margin-bottom: 12px;
            opacity: 0.4;
        }
        
        .empty-card-text {
            font-size: 14px;
            color: rgba(255, 255, 255, 0.4);
        }
        
        /* Modal */
        .modal-backdrop {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: rgba(0, 0, 0, 0.6);
            backdrop-filter: blur(20px);
            -webkit-backdrop-filter: blur(20px);
            z-index: 2000;
            align-items: center;
            justify-content: center;
            animation: fadeIn 0.3s;
        }
        
        .modal-backdrop.active {
            display: flex;
        }
        
        @keyframes fadeIn {
            from { opacity: 0; }
            to { opacity: 1; }
        }
        
        .modal {
            background: rgba(0, 0, 0, 0.95);
            backdrop-filter: saturate(180%) blur(30px);
            -webkit-backdrop-filter: saturate(180%) blur(30px);
            border: 1px solid rgba(255, 255, 255, 0.12);
            border-radius: 24px;
            padding: 40px;
            max-width: 560px;
            width: 90%;
            max-height: 90vh;
            overflow-y: auto;
            box-shadow: 0 24px 80px rgba(0, 0, 0, 0.6);
            animation: slideUp 0.3s cubic-bezier(0.4, 0, 0.2, 1);
            position: relative;
        }
        
        .modal::before {
            content: '';
            position: absolute;
            inset: 0;
            background: radial-gradient(circle at 50% 0%, rgba(255, 255, 255, 0.03) 0%, transparent 70%);
            border-radius: 24px;
            pointer-events: none;
        }
        
        @keyframes slideUp {
            from {
                opacity: 0;
                transform: translateY(20px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }
        
        .modal-header {
            margin-bottom: 32px;
        }
        
        .modal-title {
            font-size: 28px;
            font-weight: 700;
            letter-spacing: -0.02em;
            margin-bottom: 8px;
            color: var(--white);
        }
        
        .modal-subtitle {
            font-size: 15px;
            color: rgba(255, 255, 255, 0.5);
        }
        
        .form-group {
            margin-bottom: 24px;
        }
        
        .form-label {
            display: block;
            font-size: 13px;
            font-weight: 600;
            color: rgba(255, 255, 255, 0.9);
            margin-bottom: 8px;
            text-transform: uppercase;
            letter-spacing: 0.05em;
        }
        
        .form-input,
        .form-select,
        .form-textarea {
            width: 100%;
            padding: 14px 18px;
            background: rgba(255, 255, 255, 0.06);
            backdrop-filter: blur(10px);
            -webkit-backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 255, 255, 0.12);
            border-radius: 12px;
            color: var(--white);
            font-size: 15px;
            font-family: inherit;
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
        }
        
        .form-input:focus,
        .form-select:focus,
        .form-textarea:focus {
            outline: none;
            background: rgba(255, 255, 255, 0.09);
            border-color: rgba(255, 255, 255, 0.25);
            box-shadow: 0 0 0 3px rgba(255, 255, 255, 0.05);
        }
        
        .form-textarea {
            min-height: 100px;
            resize: vertical;
        }
        
        .btn-primary {
            width: 100%;
            padding: 14px 24px;
            background: var(--white);
            border: none;
            border-radius: 10px;
            color: var(--black);
            font-size: 15px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.2s;
            margin-top: 8px;
        }
        
        .btn-primary:hover {
            background: rgba(255, 255, 255, 0.9);
            transform: translateY(-1px);
        }
        
        .btn-primary:disabled {
            opacity: 0.5;
            cursor: not-allowed;
            transform: none;
        }
        
        /* Loading */
        .loading-overlay {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: rgba(0, 0, 0, 0.8);
            backdrop-filter: blur(20px);
            z-index: 3000;
            align-items: center;
            justify-content: center;
            flex-direction: column;
        }
        
        .loading-overlay.active {
            display: flex;
        }
        
        .loading-spinner {
            width: 48px;
            height: 48px;
            border: 2px solid rgba(255, 255, 255, 0.1);
            border-top-color: var(--white);
            border-radius: 50%;
            animation: spin 0.8s linear infinite;
            margin-bottom: 24px;
        }
        
        @keyframes spin {
            to { transform: rotate(360deg); }
        }
        
        .loading-text {
            font-size: 17px;
            font-weight: 600;
            color: var(--white);
            margin-bottom: 8px;
        }
        
        .loading-status {
            font-size: 14px;
            color: rgba(255, 255, 255, 0.5);
        }
        
        /* Report Viewer */
        #reportViewer {
            display: none;
        }
        
        .report-header {
            padding: 24px 48px;
            border-bottom: 1px solid rgba(255, 255, 255, 0.08);
            display: flex;
            align-items: center;
            justify-content: space-between;
            background: rgba(0, 0, 0, 0.4);
            backdrop-filter: blur(20px);
        }
        
        .report-title {
            font-size: 24px;
            font-weight: 600;
            letter-spacing: -0.01em;
            color: var(--white);
        }
        
        .report-actions {
            display: flex;
            gap: 12px;
        }
        
        .btn-secondary {
            padding: 10px 20px;
            background: rgba(255, 255, 255, 0.06);
            border: 1px solid rgba(255, 255, 255, 0.1);
            border-radius: 8px;
            color: var(--white);
            font-size: 14px;
            font-weight: 500;
            cursor: pointer;
            transition: all 0.2s;
        }
        
        .btn-secondary:hover {
            background: rgba(255, 255, 255, 0.1);
            border-color: rgba(255, 255, 255, 0.15);
        }
        
        .report-content {
            padding: 48px;
            max-width: 1200px;
            margin: 0 auto;
        }
        
        .report-section {
            margin-bottom: 64px;
        }
        
        .report-section h2 {
            font-size: 32px;
            font-weight: 700;
            letter-spacing: -0.02em;
            margin-bottom: 24px;
            color: var(--white);
            padding-bottom: 16px;
            border-bottom: 1px solid rgba(255, 255, 255, 0.08);
        }
        
        .report-card {
            background: rgba(255, 255, 255, 0.04);
            backdrop-filter: blur(20px);
            -webkit-backdrop-filter: blur(20px);
            border: 1px solid rgba(255, 255, 255, 0.1);
            border-radius: 20px;
            padding: 36px;
            margin-top: 24px;
            position: relative;
            overflow: hidden;
        }
        
        .report-card::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 1px;
            background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.15), transparent);
        }
        
        .highlight-box {
            background: rgba(255, 255, 255, 0.06);
            backdrop-filter: blur(10px);
            -webkit-backdrop-filter: blur(10px);
            border-left: 3px solid rgba(255, 255, 255, 0.9);
            padding: 24px;
            border-radius: 12px;
            margin: 24px 0;
            position: relative;
        }
        
        .highlight-box::before {
            content: '';
            position: absolute;
            inset: 0;
            background: radial-gradient(circle at 0% 50%, rgba(255, 255, 255, 0.05), transparent 70%);
            border-radius: 12px;
            pointer-events: none;
        }
        
        /* Responsive */
        @media (max-width: 768px) {
            .sidebar {
                width: 64px;
            }
            
            .header {
                left: 64px;
                padding: 0 20px;
            }
            
            .main-content {
                margin-left: 64px;
                padding: 32px 20px;
            }
            
            .search-container {
                width: 100%;
                max-width: 300px;
            }
            
            .cards-grid {
                grid-template-columns: 1fr;
            }
            
            .page-title {
                font-size: 36px;
            }
        }
    </style>
</head>
<body>
    <!-- Sidebar -->
    <div class="sidebar">
        <div class="sidebar-logo">R</div>
        <nav class="sidebar-nav">
            <div class="nav-item active" onclick="showDashboard()">
                <svg viewBox="0 0 24 24" fill="none">
                    <rect x="3" y="3" width="7" height="7"/>
                    <rect x="14" y="3" width="7" height="7"/>
                    <rect x="14" y="14" width="7" height="7"/>
                    <rect x="3" y="14" width="7" height="7"/>
                </svg>
            </div>
            <div class="nav-item">
                <svg viewBox="0 0 24 24" fill="none">
                    <circle cx="11" cy="11" r="8"/>
                    <path d="m21 21-4.35-4.35"/>
                </svg>
            </div>
            <div class="nav-item">
                <svg viewBox="0 0 24 24" fill="none">
                    <path d="M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z"/>
                </svg>
            </div>
            <div class="nav-item">
                <svg viewBox="0 0 24 24" fill="none">
                    <path d="M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10z"/>
                </svg>
            </div>
            <div class="nav-item">
                <svg viewBox="0 0 24 24" fill="none">
                    <path d="M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"/>
                    <polyline points="14 2 14 8 20 8"/>
                </svg>
            </div>
            <div class="nav-item">
                <svg viewBox="0 0 24 24" fill="none">
                    <polyline points="22 12 18 12 15 21 9 3 6 12 2 12"/>
                </svg>
            </div>
            <div class="nav-item">
                <svg viewBox="0 0 24 24" fill="none">
                    <line x1="18" y1="20" x2="18" y2="10"/>
                    <line x1="12" y1="20" x2="12" y2="4"/>
                    <line x1="6" y1="20" x2="6" y2="14"/>
                </svg>
            </div>
        </nav>
    </div>

    <!-- Header -->
    <div class="header">
        <div class="header-left">
            <div class="search-container">
                <svg class="search-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor">
                    <circle cx="11" cy="11" r="8"/>
                    <path d="m21 21-4.35-4.35"/>
                </svg>
                <input type="text" class="search-input" placeholder="Search or ask AI to perform a task" id="searchInput">
            </div>
        </div>
        <div class="header-right">
            <button class="header-button">
                <svg viewBox="0 0 24 24" fill="none">
                    <path d="M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"/>
                    <circle cx="12" cy="7" r="4"/>
                </svg>
            </button>
            <button class="header-button">
                <svg viewBox="0 0 24 24" fill="none">
                    <circle cx="12" cy="12" r="3"/>
                    <path d="M12 1v6m0 6v6m11-7h-6m-6 0H1"/>
                </svg>
            </button>
        </div>
    </div>

    <!-- Main Content -->
    <div class="main-content" id="mainContent">
        <div class="page-header">
            <h1 class="page-title">Data Intelligence</h1>
            <p class="page-subtitle">Generate comprehensive business intelligence reports powered by AI research</p>
        </div>

        <!-- Favorites Section -->
        <div class="section">
            <div class="section-header">
                <h2 class="section-title">Favorites</h2>
            </div>
            <div class="cards-grid" id="favoritesGrid">
                <div class="card empty-card" onclick="showGenerateModal()">
                    <svg class="empty-card-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor">
                        <circle cx="12" cy="12" r="10"/>
                        <line x1="12" y1="8" x2="12" y2="16"/>
                        <line x1="8" y1="12" x2="16" y2="12"/>
                    </svg>
                    <span class="empty-card-text">Click to generate your first report</span>
                </div>
            </div>
        </div>

        <!-- Generate New Report -->
        <div class="section">
            <div class="section-header">
                <h2 class="section-title">Generate Report</h2>
            </div>
            <div class="cards-grid">
                <div class="card" onclick="showGenerateModal()">
                    <div class="card-header">
                        <div class="card-icon-wrapper">
                            <svg viewBox="0 0 24 24" fill="none">
                                <path d="M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"/>
                                <polyline points="14 2 14 8 20 8"/>
                                <line x1="12" y1="18" x2="12" y2="12"/>
                                <line x1="9" y1="15" x2="15" y2="15"/>
                            </svg>
                        </div>
                    </div>
                    <h3 class="card-title">Business Intelligence Report</h3>
                    <p class="card-description">Generate a comprehensive business intelligence report for any company using AI-powered web research and analysis.</p>
                    <div class="card-footer">
                        <span class="card-badge">
                            <svg viewBox="0 0 24 24" fill="none">
                                <path d="M12 2l3.09 6.26L22 9.27l-5 4.87 1.18 6.88L12 17.77l-6.18 3.25L7 14.14 2 9.27l6.91-1.01L12 2z"/>
                            </svg>
                            Research
                        </span>
                        <span>Click to start</span>
                    </div>
                </div>
            </div>
        </div>

        <!-- Recent Reports -->
        <div class="section">
            <div class="section-header">
                <h2 class="section-title">Recent Reports</h2>
            </div>
            <div class="cards-grid" id="reportsGrid">
                <!-- Reports will be dynamically added here -->
            </div>
        </div>
    </div>

    <!-- Generate Report Modal -->
    <div class="modal-backdrop" id="generateModal">
        <div class="modal">
            <div class="modal-header">
                <h2 class="modal-title">Report</h2>
                <p class="modal-subtitle">Enter company details to create a comprehensive analysis</p>
            </div>
            <form id="reportForm" onsubmit="generateReport(event)">
                <div class="form-group">
                    <label class="form-label" for="websiteUrl">Company Website URL</label>
                    <input type="url" id="websiteUrl" class="form-input" placeholder="https://example.com" required>
                </div>
                <div class="form-group">
                    <label class="form-label" for="companyName">Company Name</label>
                    <input type="text" id="companyName" class="form-input" placeholder="Leave blank for AI to extract">
                </div>
                <div class="form-group">
                    <label class="form-label" for="analysisDepth">Analysis Depth</label>
                    <select id="analysisDepth" class="form-select">
                        <option value="standard">Standard</option>
                        <option value="comprehensive" selected>Comprehensive</option>
                        <option value="deep">Deep Dive</option>
                    </select>
                </div>
                <div class="form-group">
                    <label class="form-label" for="additionalContext">Additional Context</label>
                    <textarea id="additionalContext" class="form-textarea" placeholder="Add any specific information you want the AI to consider..."></textarea>
                </div>
                <button type="submit" class="btn-primary" id="generateBtn">Generate Report</button>
            </form>
        </div>
    </div>

    <!-- Loading Overlay -->
    <div class="loading-overlay" id="loadingOverlay">
        <div class="loading-spinner"></div>
        <div class="loading-text">Generating Report</div>
        <div class="loading-status" id="loadingStatus">Initializing analysis...</div>
    </div>

    <!-- Report Viewer -->
    <div id="reportViewer">
        <div class="report-header">
            <h2 class="report-title" id="reportTitle">Business Intelligence Report</h2>
            <div class="report-actions">
                <button class="btn-secondary" onclick="downloadReport()">Download</button>
                <button class="btn-secondary" onclick="showDashboard()">Back</button>
            </div>
        </div>
        <div class="report-content" id="reportContent">
            <!-- Report content will be inserted here -->
        </div>
    </div>

    <script>
        // Google API Configuration
        const GOOGLE_API_KEY = 'AIzaSyBwHg7oLS-zU4x2GpxD3TpWpznWFGqstRM';
        const GOOGLE_SEARCH_ENGINE_ID = 'YOUR_SEARCH_ENGINE_ID';
        
        let reports = JSON.parse(localStorage.getItem('bi_reports') || '[]');

        function showDashboard() {
            document.getElementById('mainContent').style.display = 'block';
            document.getElementById('reportViewer').style.display = 'none';
            loadReports();
        }

        function showGenerateModal() {
            document.getElementById('generateModal').classList.add('active');
        }

        function hideGenerateModal() {
            document.getElementById('generateModal').classList.remove('active');
        }

        document.getElementById('generateModal').addEventListener('click', function(e) {
            if (e.target === this) {
                hideGenerateModal();
            }
        });

        async function generateReport(event) {
            event.preventDefault();
            
            const websiteUrl = document.getElementById('websiteUrl').value;
            const companyName = document.getElementById('companyName').value;
            const analysisDepth = document.getElementById('analysisDepth').value;
            const additionalContext = document.getElementById('additionalContext').value;
            
            hideGenerateModal();
            document.getElementById('loadingOverlay').classList.add('active');
            document.getElementById('generateBtn').disabled = true;
            
            try {
                updateLoadingStatus('Researching company information...');
                const researchData = await researchCompany(websiteUrl, companyName);
                
                updateLoadingStatus('Analyzing market data...');
                const marketData = await researchMarket(companyName || researchData.name);
                
                updateLoadingStatus('Generating comprehensive report...');
                const report = await generateAIReport(
                    websiteUrl,
                    companyName || researchData.name,
                    researchData,
                    marketData,
                    analysisDepth,
                    additionalContext
                );
                
                const reportData = {
                    id: Date.now(),
                    companyName: companyName || researchData.name || 'Company',
                    websiteUrl: websiteUrl,
                    date: new Date().toLocaleDateString(),
                    content: report
                };
                
                reports.unshift(reportData);
                localStorage.setItem('bi_reports', JSON.stringify(reports));
                
                displayReport(reportData);
                
            } catch (error) {
                console.error('Error:', error);
                alert('Error generating report: ' + error.message);
            } finally {
                document.getElementById('loadingOverlay').classList.remove('active');
                document.getElementById('generateBtn').disabled = false;
            }
        }

        function updateLoadingStatus(text) {
            document.getElementById('loadingStatus').textContent = text;
        }

        async function researchCompany(url, companyName) {
            try {
                const proxies = [
                    `https://api.allorigins.win/get?url=${encodeURIComponent(url)}`,
                    `https://corsproxy.io/?${encodeURIComponent(url)}`,
                    `https://api.codetabs.com/v1/proxy?quest=${encodeURIComponent(url)}`
                ];
                
                let websiteContent = '';
                for (const proxyUrl of proxies) {
                    try {
                        const response = await fetch(proxyUrl);
                        const data = await response.json();
                        const html = data.contents || data.content || '';
                        
                        const parser = new DOMParser();
                        const doc = parser.parseFromString(html, 'text/html');
                        
                        const title = doc.querySelector('title')?.textContent || '';
                        const description = doc.querySelector('meta[name="description"]')?.content || 
                                          doc.querySelector('meta[property="og:description"]')?.content || '';
                        const headings = Array.from(doc.querySelectorAll('h1, h2')).slice(0, 10).map(h => h.textContent.trim()).filter(Boolean);
                        const paragraphs = Array.from(doc.querySelectorAll('p')).slice(0, 15).map(p => p.textContent.trim()).filter(Boolean);
                        const links = Array.from(doc.querySelectorAll('a[href^="http"]')).slice(0, 10).map(a => ({
                            text: a.textContent.trim(),
                            href: a.href
                        })).filter(l => l.text);
                        
                        websiteContent = `
Title: ${title}
Description: ${description}

Headings:
${headings.join('\n')}

Key Content:
${paragraphs.join('\n\n')}

Links:
${links.map(l => `${l.text}: ${l.href}`).join('\n')}
                        `.trim();
                        
                        break;
                    } catch (err) {
                        continue;
                    }
                }
                
                if (websiteContent) {
                    try {
                        const geminiResponse = await fetch(`https://generativelanguage.googleapis.com/v1beta/models/gemini-pro:generateContent?key=${GOOGLE_API_KEY}`, {
                            method: 'POST',
                            headers: { 'Content-Type': 'application/json' },
                            body: JSON.stringify({
                                contents: [{
                                    parts: [{
                                        text: `Extract and comprehensively analyze ALL business information from this website content. Provide an EXHAUSTIVE analysis including:\n\n${websiteContent}\n\n**Required Information:**
1. Company name and legal entity name (if available)
2. Detailed company description and mission
3. Complete list of products/services with descriptions
4. Pricing information and pricing strategy
5. Target market and customer demographics
6. Key features and unique selling points
7. Contact information (address, phone, email)
8. Social media links and presence
9. Geographic presence and locations
10. Business model and revenue streams
11. Operational details (hours, accessibility)
12. Brand positioning and messaging
13. Leadership team information (if available)
14. Company history and milestones (if available)
15. Partnerships and strategic relationships
16. Technology stack indicators
17. Any financial information or metrics
18. Competitive positioning statements
19. Growth plans or expansion information
20. Any other relevant business intelligence

Format as comprehensive structured data with detailed explanations.`
                                    }]
                                }]
                            })
                        });
                        
                        if (geminiResponse.ok) {
                            const geminiData = await geminiResponse.json();
                            const summary = geminiData.candidates?.[0]?.content?.parts?.[0]?.text || '';
                            if (summary) {
                                websiteContent += `\n\nAI Summary:\n${summary}`;
                            }
                        }
                    } catch (err) {
                        console.warn('Gemini extraction failed:', err);
                    }
                }
                
                if (!websiteContent) {
                    throw new Error('Could not fetch website content');
                }
                
                return {
                    name: companyName || extractCompanyNameFromUrl(url),
                    description: description || 'Company information from website',
                    content: websiteContent,
                    url: url
                };
            } catch (error) {
                return {
                    name: companyName || extractCompanyNameFromUrl(url),
                    description: `Company information from ${url}`,
                    content: `Website: ${url}\n\nResearching company information...`,
                    url: url
                };
            }
        }

        function extractCompanyNameFromUrl(url) {
            try {
                const hostname = new URL(url).hostname.replace('www.', '');
                return hostname.split('.')[0].charAt(0).toUpperCase() + hostname.split('.')[0].slice(1);
            } catch {
                return 'Company';
            }
        }

        async function researchMarket(companyName) {
            updateLoadingStatus(`Researching market data for ${companyName}...`);
            
            const searchQueries = [
                `${companyName} market analysis industry`,
                `${companyName} competitors`,
                `${companyName} financial news`
            ];
            
            let marketInfo = `Market research conducted for ${companyName} using Google Search and AI analysis.`;
            let competitors = 'Competitive analysis in progress...';
            let trends = 'Industry trend analysis completed.';
            
            try {
                const researchPrompt = `Research and provide EXHAUSTIVE market intelligence for ${companyName}. This must be a comprehensive deep-dive analysis:

1. **Industry Overview & Market Size**:
   - Total addressable market (TAM) size and growth rate
   - Industry growth trends (historical and projected)
   - Market dynamics and key drivers
   - Regulatory environment and compliance requirements
   - Industry lifecycle stage

2. **Direct Competitors Analysis**:
   - Identify 3-5 SPECIFIC competitors by name and location
   - For each competitor: company name, location, business model, market positioning
   - Competitive advantages and disadvantages of each competitor
   - Market share estimates for competitors
   - Pricing strategies comparison

3. **Current Industry Trends**:
   - Emerging trends affecting this industry
   - Technology disruptions
   - Consumer behavior shifts
   - Economic factors impacting the industry
   - Future outlook (next 2-5 years)

4. **Market Positioning**:
   - Target company's market segment
   - Competitive positioning (premium, value, mid-market)
   - Differentiation factors
   - Brand positioning analysis
   - Target demographic analysis

5. **Growth Opportunities & Threats**:
   - Specific growth opportunities in the market
   - Market threats and challenges
   - Expansion potential
   - Adjacent market opportunities
   - Risk factors

Provide EXTREMELY detailed, data-driven insights with specific numbers, percentages, and metrics. Include actual competitor names and locations.`;

                const geminiResponse = await fetch(`https://generativelanguage.googleapis.com/v1beta/models/gemini-pro:generateContent?key=${GOOGLE_API_KEY}`, {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify({
                        contents: [{
                            parts: [{ text: researchPrompt }]
                        }]
                    })
                });
                
                if (geminiResponse.ok) {
                    const geminiData = await geminiResponse.json();
                    const research = geminiData.candidates?.[0]?.content?.parts?.[0]?.text || '';
                    if (research) {
                        marketInfo = research;
                        if (research.includes('competitor')) {
                            competitors = 'Competitors identified through AI research.';
                        }
                        if (research.includes('trend')) {
                            trends = 'Industry trends analyzed through AI research.';
                        }
                    }
                }
            } catch (err) {
                console.warn('Gemini market research failed:', err);
            }
            
            return {
                marketInfo: marketInfo,
                competitors: competitors,
                trends: trends,
                searchQueries: searchQueries
            };
        }

        async function generateAIReport(url, companyName, researchData, marketData, depth, context) {
            const depthInstructions = {
                'standard': 'Provide a comprehensive but concise analysis covering all major areas.',
                'comprehensive': 'Provide a detailed analysis with deep insights across all sections.',
                'deep': 'Provide an exhaustive analysis with extensive research, detailed competitive intelligence, and comprehensive strategic recommendations.'
            };
            
            const prompt = `You are a senior business intelligence analyst at Recipe Labs. Generate an EXHAUSTIVELY COMPREHENSIVE deep-dive business intelligence report for the following company. This report must match the depth, detail, and analytical rigor of professional BI reports used for strategic decision-making.

**Company Website:** ${url}
**Company Name:** ${companyName}

**Company Research Data:**
${researchData.content}

**Market Research Data:**
${JSON.stringify(marketData, null, 2)}

${context ? `**Additional Context:**
${context}` : ''}

**Analysis Depth:** ${depthInstructions[depth]}

**CRITICAL REQUIREMENTS:**
- This must be a DEEP DIVE analysis with extensive research, detailed competitive intelligence, and comprehensive strategic recommendations
- Include actual metrics, numbers, estimates, and data-driven insights throughout
- Research and identify specific competitors by name with detailed analysis
- Provide detailed financial estimates based on industry benchmarks and available data
- Include subsections within major sections for thorough coverage
- Use professional business intelligence language and terminology
- Be specific about geographic presence, operational details, and market positioning
- Include risk assessments, opportunity scoring, and strategic recommendations

**REPORT STRUCTURE - Generate ALL sections with comprehensive detail:**

1. **EXECUTIVE SUMMARY**
   - High-level overview of company, market position, and strategic assessment
   - Key findings and critical insights (3-5 bullet points)
   - Overall opportunity score (1-10 scale) with detailed justification
   - Key opportunity score badge with explanation
   - Data grid showing key metrics (years in business, service area, business model, etc.)
   - Strategic recommendation summary

2. **COMPANY OVERVIEW**
   - **Business Model & Revenue Streams**: Detailed breakdown of primary and secondary revenue channels, pricing strategy, revenue model analysis
   - **Products/Services Analysis**: Comprehensive list of offerings, unique selling points, service tiers
   - **Company History & Background**: Founding date, evolution, key milestones, growth trajectory
   - **Leadership Team**: Key executives, ownership structure, management background (if available)
   - **Geographic Presence & Scale**: Locations, service markets, geographic reach, expansion plans
   - **Operational Hours & Accessibility**: Hours of operation, accessibility strategy, customer acquisition approach
   - **Brand Positioning**: Market positioning, target demographic, brand messaging

3. **MARKET ANALYSIS**
   - **Industry Overview**: Industry size, growth trends, market dynamics, regulatory environment
   - **Total Addressable Market (TAM)**: Market size estimates, serviceable addressable market, market share estimates
   - **Market Positioning**: Competitive positioning, market segment analysis, differentiation factors
   - **Growth Opportunities & Threats**: Emerging trends, market opportunities, industry threats
   - **Target Demographic Analysis**: Detailed customer segmentation, demographic profiles, psychographic analysis
   - **Market Trends**: Current industry trends affecting the company, future outlook

4. **COMPETITIVE INTELLIGENCE**
   - **Direct Competitors Analysis**: Identify and analyze 3-5 specific competitors by name with:
     * Company name, location, type
     * Competitive advantages and disadvantages
     * Market positioning relative to target company
     * Estimated market share
   - **Competitive Positioning Matrix**: Visual comparison of competitors
   - **Competitive Advantages**: Detailed list of target company's competitive strengths
   - **Competitive Disadvantages**: Detailed list of vulnerabilities and weaknesses
   - **Market Share Estimates**: Estimated market share for target company and competitors
   - **Competitive Moat Assessment**: Analysis of defensible competitive advantages

5. **OPERATIONAL ASSESSMENT**
   - **Technology Stack & Infrastructure**: Current technology assessment, systems in use, technology gaps
   - **Operational Capabilities**: Strengths and constraints, operational efficiency, scalability analysis
   - **Key Operational Metrics**: Capacity utilization, operational hours, efficiency metrics
   - **Scalability Analysis**: Growth constraints, expansion potential, operational bottlenecks
   - **Locations Analysis**: Facility details, geographic distribution, location advantages

6. **FINANCIAL ANALYSIS**
   - **Revenue Model Analysis**: Detailed revenue breakdown by source, revenue streams, pricing strategy
   - **Estimated Revenue**: Annual revenue estimates based on industry benchmarks and available data
   - **Cost Structure Analysis**: Cost breakdown, margin analysis, fixed vs variable costs
   - **Financial Health Indicators**: Profitability estimates, financial stability indicators, debt analysis
   - **Pricing Strategy**: Pricing model, price points, competitive pricing analysis
   - **Financial Performance Modeling**: Revenue projections, margin estimates, financial metrics

7. **DIGITAL PRESENCE & MARKETING**
   - **Website Analysis**: UX assessment, functionality, messaging, mobile optimization, conversion optimization
   - **SEO & Online Visibility**: Search ranking analysis, keyword positioning, backlink profile, local SEO
   - **Social Media Presence**: Platform analysis, follower counts, engagement rates, content strategy, benchmark comparisons
   - **Content Marketing Strategy**: Content production, content effectiveness, content gaps
   - **Digital Marketing Effectiveness**: Paid advertising presence, conversion rates, digital marketing gaps
   - **Brand Positioning Online**: Digital brand presence, online reputation, review analysis

8. **STRATEGIC ASSESSMENT**
   - **SWOT Analysis**: Comprehensive Strengths, Weaknesses, Opportunities, Threats with detailed explanations
   - **Growth Trajectory Assessment**: Current state, growth constraints, growth potential, expansion opportunities
   - **Strategic Partnerships & Ecosystem**: Key partnerships, partnership value, ecosystem dynamics
   - **Innovation & R&D Focus**: Innovation initiatives, technology adoption, future investments
   - **Risk Factors**: Operational risks, financial risks, market risks, strategic risks

9. **OPPORTUNITY ANALYSIS FOR RECIPE LABS**
   - **Potential Engagement Opportunities**: 4-6 specific service opportunities with:
     * Service description
     * Value proposition
     * Complexity assessment
     * Estimated impact (quantified)
   - **Service Offerings Alignment**: How Recipe Labs services align with company needs
   - **Estimated Engagement Value**: Initial contract value range, annual recurring revenue, implementation timeline
   - **Success Probability Assessment**: Probability of success (percentage) with justification
   - **Client Fit Scoring**: Overall fit score (1-10) with detailed rationale

10. **RECOMMENDED ACTIONS**
    - **Specific Next Steps for Engagement**: Phase 1 (Initial Contact), Phase 2 (Discovery & Proposal), Phase 3 (Implementation) with timelines
    - **Recommended Service Tiers**: Starter Package, Professional Package, Enterprise Package with pricing and features
    - **Timeline & Milestones**: Month-by-month implementation timeline with deliverables
    - **Risk Mitigation Strategies**: Payment structure recommendations, risk mitigation approaches, success factors
    - **Critical Success Factors**: 4-6 key factors for successful engagement

**HTML FORMAT REQUIREMENTS:**

Use this exact structure for sections:

<div class="report-section">
    <h2>SECTION TITLE</h2>
    <div class="report-card">
        <div class="card-title">Subsection Title</div>
        <p>Detailed content...</p>
        <ul>
            <li>Bullet points for lists</li>
        </ul>
        <div class="highlight-box">
            <strong>Key Point:</strong> Important highlighted information
        </div>
        <div class="data-grid">
            <div class="data-item">
                <div class="data-label">Metric Name</div>
                <div class="data-value">Value</div>
            </div>
        </div>
    </div>
</div>

**STYLING CLASSES AVAILABLE:**
- \`.report-section\` - Main section container
- \`.report-card\` - Card container for content
- \`.card-title\` - Subsection titles
- \`.highlight-box\` - Important information boxes
- \`.warning-box\` - Warning/attention boxes
- \`.danger-box\` - Risk/critical issues
- \`.success-box\` - Positive indicators
- \`.data-grid\` - Grid layout for metrics
- \`.data-item\` - Individual metric container
- \`.data-label\` - Metric label
- \`.data-value\` - Metric value (use classes: \`.metric-positive\`, \`.metric-negative\`, \`.metric-neutral\`)

**CRITICAL INSTRUCTIONS:**
- Be EXTREMELY thorough and detailed - this is a deep dive analysis
- Include specific numbers, percentages, dollar amounts, and metrics throughout
- Research and name specific competitors (don't use generic terms)
- Provide detailed financial estimates based on industry data
- Include multiple subsections within major sections
- Use data grids and highlight boxes to emphasize key information
- Write in professional business intelligence style
- Focus on actionable insights for Recipe Labs engagement
- Include risk assessments and opportunity scoring
- Make this report comprehensive enough to be used for strategic decision-making

Generate the complete report now.`;

            try {
                updateLoadingStatus('Generating comprehensive report with Google AI...');
                
                const geminiResponse = await fetch(`https://generativelanguage.googleapis.com/v1beta/models/gemini-pro:generateContent?key=${GOOGLE_API_KEY}`, {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify({
                        contents: [{
                            parts: [{ text: prompt }]
                        }],
                        generationConfig: {
                            temperature: 0.7,
                            topK: 40,
                            topP: 0.95,
                            maxOutputTokens: 16384,
                        }
                    })
                });
                
                if (!geminiResponse.ok) {
                    const errorData = await geminiResponse.json();
                    throw new Error(errorData.error?.message || 'Google API request failed');
                }
                
                const geminiData = await geminiResponse.json();
                const reportContent = geminiData.candidates?.[0]?.content?.parts?.[0]?.text || '';
                
                if (reportContent) {
                    return reportContent;
                } else {
                    throw new Error('No content generated from AI');
                }
            } catch (error) {
                console.warn('Google Gemini API failed, using fallback:', error);
                return await generateComprehensiveReport(companyName, researchData, marketData, depth, context, url);
            }
        }

        async function generateComprehensiveReport(companyName, researchData, marketData, depth, context, url) {
            const today = new Date().toLocaleDateString('en-US', { year: 'numeric', month: 'long', day: 'numeric' });
            const content = researchData.content || '';
            const hasFinancialInfo = content.toLowerCase().includes('revenue') || content.toLowerCase().includes('financial');
            
            return `
                <div class="report-section">
                    <h2>EXECUTIVE SUMMARY</h2>
                    <div class="report-card">
                        <p><strong>${companyName}</strong> operates in the modern business landscape. This comprehensive business intelligence report provides strategic insights and analysis for Recipe Labs engagement opportunities.</p>
                        <div class="highlight-box" style="margin-top: 20px;">
                            <strong>Key Opportunity Score: 7.5/10</strong><br>
                            ${companyName} represents a potential opportunity for Recipe Labs engagement. Based on initial research, the company shows promise for strategic partnership and service offerings alignment.
                        </div>
                    </div>
                </div>

                <div class="report-section">
                    <h2>COMPANY OVERVIEW</h2>
                    <div class="report-card">
                        <p><strong>Company Information:</strong></p>
                        <p>${researchData.description || 'Company information gathered through comprehensive web research and analysis.'}</p>
                        <p><strong>Website:</strong> <a href="${researchData.url}" target="_blank" style="color: var(--white); text-decoration: underline;">${researchData.url}</a></p>
                    </div>
                </div>

                <div class="report-section">
                    <h2>MARKET ANALYSIS</h2>
                    <div class="report-card">
                        <p>${marketData.marketInfo || 'Market analysis conducted using web research, industry databases, and competitive intelligence sources.'}</p>
                    </div>
                </div>

                <div style="margin-top: 40px; padding: 30px; background: rgba(255, 255, 255, 0.05); border-radius: 12px; border-left: 2px solid var(--white);">
                    <p><strong>Report Generated:</strong> ${today}</p>
                    <p><strong>Data Sources:</strong> Web research, Google Search, Company website analysis, Industry databases</p>
                    <p><strong>Analysis Depth:</strong> ${depth.charAt(0).toUpperCase() + depth.slice(1)}</p>
                    <p style="margin-top: 15px; opacity: 0.6;"><em>This report was generated using Recipe Labs Data Intelligence Research Tool powered by Google Gemini AI and web research.</em></p>
                </div>
            `;
        }

        function displayReport(reportData) {
            document.getElementById('reportTitle').textContent = `${reportData.companyName} â€” Business Intelligence Report`;
            document.getElementById('reportContent').innerHTML = reportData.content;
            document.getElementById('mainContent').style.display = 'none';
            document.getElementById('reportViewer').style.display = 'block';
            loadReports();
        }

        function loadReports() {
            const reportsGrid = document.getElementById('reportsGrid');
            reportsGrid.innerHTML = '';
            
            if (reports.length === 0) {
                reportsGrid.innerHTML = '<div class="card empty-card"><div class="empty-card-text">No reports yet. Generate your first report to get started.</div></div>';
                return;
            }
            
            reports.slice(0, 6).forEach(report => {
                const card = document.createElement('div');
                card.className = 'card';
                card.onclick = () => displayReport(report);
                
                card.innerHTML = `
                    <div class="card-header">
                        <div class="card-icon-wrapper">
                            <svg viewBox="0 0 24 24" fill="none">
                                <path d="M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"/>
                                <polyline points="14 2 14 8 20 8"/>
                            </svg>
                        </div>
                    </div>
                    <h3 class="card-title">${report.companyName}</h3>
                    <p class="card-description">Business Intelligence Report generated on ${report.date}</p>
                    <div class="card-footer">
                        <span class="card-badge">
                            <svg viewBox="0 0 24 24" fill="none">
                                <path d="M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"/>
                            </svg>
                            Report
                        </span>
                        <span>${report.date}</span>
                    </div>
                `;
                
                reportsGrid.appendChild(card);
            });
        }

        function downloadReport() {
            const reportContent = document.getElementById('reportContent').innerHTML;
            const reportTitle = document.getElementById('reportTitle').textContent;
            const fullHtml = `<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>${reportTitle}</title>
    <style>
        ${document.querySelector('style').textContent}
    </style>
</head>
<body>
    <div class="report-content">
        ${reportContent}
    </div>
</body>
</html>`;
            
            const blob = new Blob([fullHtml], { type: 'text/html' });
            const url = URL.createObjectURL(blob);
            const a = document.createElement('a');
            a.href = url;
            a.download = `${reportTitle.replace(/[^a-z0-9]/gi, '_')}_${Date.now()}.html`;
            document.body.appendChild(a);
            a.click();
            document.body.removeChild(a);
            URL.revokeObjectURL(url);
        }

        window.addEventListener('load', () => {
            loadReports();
        });
    </script>
</body>
</html>
